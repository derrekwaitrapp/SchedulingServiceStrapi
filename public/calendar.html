<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8' />
  <link href='/assets/css/main.css' rel='stylesheet' />
  <script src='/assets/js/main.js'></script>

  <link rel="stylesheet" type="text/css" href="https://uicdn.toast.com/tui-calendar/latest/tui-calendar.css" />

  <!-- If you use the default popups, use this. -->
  <link rel="stylesheet" type="text/css" href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css" />
  <link rel="stylesheet" type="text/css" href="https://uicdn.toast.com/tui.time-picker/latest/tui-time-picker.css" />

  <script   src="https://code.jquery.com/jquery-3.6.0.min.js"   integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="   crossorigin="anonymous"></script>

  <script src="https://uicdn.toast.com/tui.code-snippet/v1.5.2/tui-code-snippet.min.js"></script>
  <script src="https://uicdn.toast.com/tui.time-picker/latest/tui-time-picker.min.js"></script>
  <script src="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.min.js"></script>
  <script src="https://uicdn.toast.com/tui-calendar/latest/tui-calendar.js"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

</head>
<body>

<nav class="navbar navbar-light bg-light">
  <a class="navbar-brand" href="#">
    <div class="container">
      <img src="/assets/images/logo_login.png" width="100" class="d-inline-block align-top" alt="">
    </div>
  </a>
</nav>

<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">View Calendar</li>
  </ol>
</nav>
<div class="container">
<div id='calendar'></div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {

//     // jquery wrapper
//     var $calEl = $('#calendar').tuiCalendar({
//       defaultView: 'week',
//       taskView: true,
//       template: {
//         monthDayname: function(dayname) {
//           return '<span class="calendar-week-dayname-name">' + dayname.label + '</span>';
//         }
//
//       }
//     });
//
// // You can get calendar instance
//     var calendarInstance = $calEl.data('tuiCalendar');



    var schedule = {};
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        schedule = JSON.parse(this.responseText);
        console.log(schedule.blocks)
        schedule.blocks = schedule.blocks.map((block) => {
          return {
            title: block.title,
            start: block.start,
            end: block.end
          }
        });

        console.log(schedule.blocks)

        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth',
          initialDate: '2021-05-26',
          headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay'
          },
          events: schedule.blocks
        });
        // calendarInstance.createSchedules(schedule.blocks);
        calendar.render();
      }
    };
    xhttp.open("GET", "/schedules/1", true);
    xhttp.send();
  });
</script>
</body>
</html>
